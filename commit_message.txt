Fix: Address issues in the canvas render function

This commit begins to resolve issues in the canvas render function.  The changes include optimizing rendering performance and fixing minor visual artifacts. Further work is needed to fully resolve the rendering issues.
